{"ast":null,"code":"import { productsState } from \"../products/state\";\nimport { cart } from \"./state\";\nimport { DEL, DEL_CART, MINUS_CART, NEW_CART, PLUS, PLUS_CART } from \"./type\";\nexport const cartReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : cart;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case NEW_CART:\n      //action.value == {user_id, product_id}\n      let x = state.arr.find(e => e.user_id == action.value.user_id && e.product_id == action.value.product_id);\n\n      if (x) {\n        let prod = productsState.products.find(e => e.id == x.product_id);\n\n        if (prod.count > x.quantitiy) {\n          x.quantitiy++;\n        }\n      } else {\n        state.arr.push({ ...action.value,\n          id: Date.now(),\n          quantitiy: 1\n        });\n      }\n\n      break;\n\n    case PLUS_CART:\n      //action.value = {id}cart\n      let x1 = state.arr.find(e => e.id == action.value.id);\n\n      if (x1) {\n        let prod = productsState.products.find(e => e.id == x1.product_id);\n\n        if (prod.count > x1.quantitiy) {\n          x1.quantitiy++;\n        }\n      }\n\n      break;\n\n    case MINUS_CART:\n      //action.value = {id}cart\n      let x2 = state.arr.find(e => e.id == action.value.id);\n      x2.quantitiy--;\n\n      if (x2.quantitiy <= 0) {\n        state.arr = state.arr.filter(e => e.id != action.value.id);\n      }\n\n      break;\n\n    case DEL_CART:\n      //action.value = {id}cart\n      state.arr = state.arr.filter(e => e.id != action.value.id);\n      break;\n\n    default:\n      break;\n  }\n\n  return { ...state\n  };\n};","map":{"version":3,"names":["productsState","cart","DEL","DEL_CART","MINUS_CART","NEW_CART","PLUS","PLUS_CART","cartReducer","state","action","type","x","arr","find","e","user_id","value","product_id","prod","products","id","count","quantitiy","push","Date","now","x1","x2","filter"],"sources":["C:/Users/user/Desktop/online-shop-react/src/store/tocart/reducer.js"],"sourcesContent":["import { productsState } from \"../products/state\";\r\nimport { cart } from \"./state\";\r\nimport { DEL, DEL_CART,  MINUS_CART, NEW_CART, PLUS, PLUS_CART } from \"./type\";\r\n\r\nexport const cartReducer = (state = cart, action) => {\r\n    switch (action.type) {\r\n\r\n        case NEW_CART://action.value == {user_id, product_id}\r\n            let x = state.arr.find(e => e.user_id == action.value.user_id && e.product_id == action.value.product_id)\r\n            if (x) {\r\n                let prod = productsState.products.find(e => e.id == x.product_id);\r\n                if (prod.count > x.quantitiy) {\r\n                    x.quantitiy++\r\n                }\r\n            } else {\r\n                state.arr.push({ ...action.value, id: Date.now(), quantitiy: 1 })\r\n            }\r\n            break;\r\n        case PLUS_CART://action.value = {id}cart\r\n            let x1 = state.arr.find(e => e.id == action.value.id)\r\n            if (x1) {\r\n                let prod = productsState.products.find(e => e.id == x1.product_id);\r\n                if (prod.count > x1.quantitiy) {\r\n                    x1.quantitiy++\r\n                }\r\n            }\r\n            break;\r\n        case MINUS_CART://action.value = {id}cart\r\n            let x2 = state.arr.find(e => e.id == action.value.id)\r\n            x2.quantitiy--;\r\n            if (x2.quantitiy <= 0) {\r\n                state.arr = state.arr.filter(e => e.id != action.value.id)\r\n            }\r\n            break;\r\n        case DEL_CART://action.value = {id}cart\r\n            state.arr = state.arr.filter(e => e.id != action.value.id)\r\n            break\r\n        default:\r\n            break\r\n    }\r\n\r\n\r\n    return { ...state }\r\n}\r\n"],"mappings":"AAAA,SAASA,aAAT,QAA8B,mBAA9B;AACA,SAASC,IAAT,QAAqB,SAArB;AACA,SAASC,GAAT,EAAcC,QAAd,EAAyBC,UAAzB,EAAqCC,QAArC,EAA+CC,IAA/C,EAAqDC,SAArD,QAAsE,QAAtE;AAEA,OAAO,MAAMC,WAAW,GAAG,YAA0B;EAAA,IAAzBC,KAAyB,uEAAjBR,IAAiB;EAAA,IAAXS,MAAW;;EACjD,QAAQA,MAAM,CAACC,IAAf;IAEI,KAAKN,QAAL;MAAc;MACV,IAAIO,CAAC,GAAGH,KAAK,CAACI,GAAN,CAAUC,IAAV,CAAeC,CAAC,IAAIA,CAAC,CAACC,OAAF,IAAaN,MAAM,CAACO,KAAP,CAAaD,OAA1B,IAAqCD,CAAC,CAACG,UAAF,IAAgBR,MAAM,CAACO,KAAP,CAAaC,UAAtF,CAAR;;MACA,IAAIN,CAAJ,EAAO;QACH,IAAIO,IAAI,GAAGnB,aAAa,CAACoB,QAAd,CAAuBN,IAAvB,CAA4BC,CAAC,IAAIA,CAAC,CAACM,EAAF,IAAQT,CAAC,CAACM,UAA3C,CAAX;;QACA,IAAIC,IAAI,CAACG,KAAL,GAAaV,CAAC,CAACW,SAAnB,EAA8B;UAC1BX,CAAC,CAACW,SAAF;QACH;MACJ,CALD,MAKO;QACHd,KAAK,CAACI,GAAN,CAAUW,IAAV,CAAe,EAAE,GAAGd,MAAM,CAACO,KAAZ;UAAmBI,EAAE,EAAEI,IAAI,CAACC,GAAL,EAAvB;UAAmCH,SAAS,EAAE;QAA9C,CAAf;MACH;;MACD;;IACJ,KAAKhB,SAAL;MAAe;MACX,IAAIoB,EAAE,GAAGlB,KAAK,CAACI,GAAN,CAAUC,IAAV,CAAeC,CAAC,IAAIA,CAAC,CAACM,EAAF,IAAQX,MAAM,CAACO,KAAP,CAAaI,EAAzC,CAAT;;MACA,IAAIM,EAAJ,EAAQ;QACJ,IAAIR,IAAI,GAAGnB,aAAa,CAACoB,QAAd,CAAuBN,IAAvB,CAA4BC,CAAC,IAAIA,CAAC,CAACM,EAAF,IAAQM,EAAE,CAACT,UAA5C,CAAX;;QACA,IAAIC,IAAI,CAACG,KAAL,GAAaK,EAAE,CAACJ,SAApB,EAA+B;UAC3BI,EAAE,CAACJ,SAAH;QACH;MACJ;;MACD;;IACJ,KAAKnB,UAAL;MAAgB;MACZ,IAAIwB,EAAE,GAAGnB,KAAK,CAACI,GAAN,CAAUC,IAAV,CAAeC,CAAC,IAAIA,CAAC,CAACM,EAAF,IAAQX,MAAM,CAACO,KAAP,CAAaI,EAAzC,CAAT;MACAO,EAAE,CAACL,SAAH;;MACA,IAAIK,EAAE,CAACL,SAAH,IAAgB,CAApB,EAAuB;QACnBd,KAAK,CAACI,GAAN,GAAYJ,KAAK,CAACI,GAAN,CAAUgB,MAAV,CAAiBd,CAAC,IAAIA,CAAC,CAACM,EAAF,IAAQX,MAAM,CAACO,KAAP,CAAaI,EAA3C,CAAZ;MACH;;MACD;;IACJ,KAAKlB,QAAL;MAAc;MACVM,KAAK,CAACI,GAAN,GAAYJ,KAAK,CAACI,GAAN,CAAUgB,MAAV,CAAiBd,CAAC,IAAIA,CAAC,CAACM,EAAF,IAAQX,MAAM,CAACO,KAAP,CAAaI,EAA3C,CAAZ;MACA;;IACJ;MACI;EAjCR;;EAqCA,OAAO,EAAE,GAAGZ;EAAL,CAAP;AACH,CAvCM"},"metadata":{},"sourceType":"module"}